download https://github.com/emacs-mirror/emacs/tree/emacs-29.1
sudo apt-get install -y gcc-10 build-essential
sudo apt install libxpm-dev libjpeg-dev libgif-dev libtiff-dev libgnutls28-dev libjson11-1-dev  gnutls-bin  libjansson-dev
sudo apt install build-essential libgtk-3-dev libgnutls28-dev libtiff5-dev libgif-dev libjpeg-dev libpng-dev libxpm-dev libncurses-dev texinfo
CC="gcc-10" ./autogen.sh
CC="gcc-10" ./configure --with-harfbuzz --with-pgtk --with-cairo --with-json --with-native-compilation CFLAGS="-O2 -pipe -march=native -fomit-frame-pointer"
CC="gcc-10" make -j $(nproc --all)
sudo make install 